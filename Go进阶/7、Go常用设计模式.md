# MVC模式

- 是一种常见的 “代码组织架构”， 可以在开发中，对数据进行处理并解耦。
  - model：模型。 处理数据库相关的文件。
  - veiw：视图。处理显示相关的文件。 网站：html
  - controller：控制器。处理具体业务！  联动 m 和 v
- MVC 与语言无关！是常见的 代码组织架构。

<img src="./assets/image-20240106112428179.png" alt="image-20240106112428179" style="zoom: 67%;" />

# 其他开发设计模式

**页面驱动设计**：每位客户端开发的同学要开展工作都离不开UI设计师的设计稿。我称这种编程思维是：**“页面驱动设计”**

**数据驱动设计**：只要产品同学确定好PRD产品说明文档，我就可以开发了，开发的顺序往往是这样的：

1. 通读一遍需求文档和原型图
2. 梳理业务逻辑，进行抽象，明确有多少个功能需求要开发
3. 根据功能需求创建数据库，创建表，添加字段，设置合适的字段类型，长度，主外键等
4. 考虑业务场景，创建索引...
5. 开始疯狂的CRUD...
6. 开始疯狂的加Cache...
7. 开发疯狂的给客户端提供数据接口...
8. 持续迭代：根据业务增长做负载均衡、分库分表、读写分离....

**你认为上面哪个步骤最重要呢?**

我认为**设计数据库表结构**是最重要的环节：对业务的理解程度，对可扩展性的考虑程度都直接影响到了我们会“如何设计数据库表结构”；**数据库表结构设计**是否合理，也直接影响了我们后续开发业务逻辑是否顺利。

我称这种编程思维是：**“数据驱动设计”**。

（PS：*网络上关于“数据驱动设计”这一名词更主流的解释：通过不断的数据积累和反馈，来指导产品的更新迭代。*）



# DDD领域开发模式

除了安卓客户端开发提到的”**页面驱动设计**“和服务端开发的”**数据驱动设计**“的场景，这样能更好的理解DDD。

## 什么是DDD?

> DDD (Domain Driven Design)：领域驱动设计。

我不想复制粘贴官方对于DDD晦涩难懂的定义，下面我将用最简单易懂的话告诉你DDD是什么？你值得知道的几个概念，对一线开发人员来说，知道这些，足矣。

## 1. 核心思想

1. DDD的核心思想就是避免业务逻辑的复杂性和技术实现的复杂性耦合在一起。
2. 明确业务复杂性和技术复杂性的边界，隔离双方的复杂性，站在更高的角度实现解耦。

## 2. 最大价值

DDD最大的价值就是梳理业务需求，抽象出一个个“领域”，并形成各个领域之间的接口交互，方便团队协作，推进项目前进。

## 3. 必懂概念

### 领域

领域就是一种**边界**的划分，首先举一些生活中的例子：

比如互联网、机械制造、种植业、养殖业等等这就是不同的领域；

再比如互联网中的：移动互联网、互联网金融、互联网健康这也是不同的领域；

我们把领域抽象一下，领域还可以这样划分：

1. 核心领域：业务系统中的核心价值
2. 通用领域：提供通用服务的领域，比如消息系统
3. 支撑领域：作为基础设施，专注于业务系统中的某个重要业务，比如日志系统

在明确领域的概念之后，还有个更重要的概念：

### 领域模型

DDD的核心就是通过一套科学的方法论告诉大家如何创建不同的领域，如何确定领域的边界。

“模型”是DDD中的重要概念：模型是对领域的抽象和模拟。

“建模”是DDD中重要的手段：建模是针对特定问题建立领域的合理模型。

### “不以用户为中心”

**DDD领域驱动设计，还有一个有意思的观点：“不以用户为中心”。**

为什么会这么说呢？

因为DDD认为，“以用户为中心”其实是表层需求，真正的需求应该是基于领域的，领域之所以有意义，一定是和人有关的。

所以做领域驱动设计时，应该做到“客观设计”，就是无论是谁使用，如何使用，这个领域都是这样的，挖掘深层次的需求。

讲个小故事：

> 在汽车出现之前，那时候人们的需求就是想要一辆更快的马车，如果当时被限制在“用户需求”的框框里，怎么能发明出来汽车呢？

仔细品品这个小故事，是不是很有意思。

### 阶段性小结

对于小白来说，关于DDD了解到这里就足够了。

毕竟设计思想这种东西需要长时间的积累，需要不断的通过项目实战才能领悟。

目前也有不少人喷“DDD”，认为这是给CTO、项目经理、老板吹水用的。

对于一线开发人员来讲，与其关注DDD，不如关注如何用好“微服务架构”。

以我的经验，当我看了很多DDD的资料之后还是云里雾里，但是当我使用微服务架构去开发了一个项目，回过头来再思考DDD，就清晰多了。

**下面开始介绍微服务是如何让DDD落地的？**

## 微服务

微服务的特点如下，大家先有个整体的概念，后面我会使用go-micro和go-zero框架带大家进行微服务项目的实践。

### 1. 单一职责

DDD思想指导我们对业务逻辑进行拆分，明确各自边界，形成不同的领域，不同的领域对应不同的微服务，这就是单一职责。

### 2. 团队独立

不同的领域对应不同的业务团队，也对应着不同的技术团队，彼此之间是解耦的。

### 3. 技术独立

不同的领域，不同的团队可以使用不同的开发语言，各自独立，只要按规范提供服务即可。

### 4. 数据库分离

每个领域（每个服务）都拥有自己的数据源。

### 5. 独立部署

每个领域（每个服务）都是独立的组件，可复用，可替换，降低耦合，易维护，易集群Docker部署服务

